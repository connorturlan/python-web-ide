(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P=Symbol("Comlink.proxy"),F=Symbol("Comlink.endpoint"),z=Symbol("Comlink.releaseProxy"),S=Symbol("Comlink.finalizer"),m=Symbol("Comlink.thrown"),v=e=>typeof e=="object"&&e!==null||typeof e=="function",N={canHandle:e=>v(e)&&e[P],serialize(e){const{port1:n,port2:t}=new MessageChannel;return k(e,n),[t,[t]]},deserialize(e){return e.start(),V(e)}},_={canHandle:e=>v(e)&&m in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},A=new Map([["proxy",N],["throw",_]]);function H(e,n){for(const t of e)if(n===t||t==="*"||t instanceof RegExp&&t.test(n))return!0;return!1}function k(e,n=globalThis,t=["*"]){n.addEventListener("message",function c(a){if(!a||!a.data)return;if(!H(t,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:i,type:s,path:u}=Object.assign({path:[]},a.data),l=(a.data.argumentList||[]).map(y);let r;try{const o=u.slice(0,-1).reduce((d,h)=>d[h],e),f=u.reduce((d,h)=>d[h],e);switch(s){case"GET":r=f;break;case"SET":o[u.slice(-1)[0]]=y(a.data.value),r=!0;break;case"APPLY":r=f.apply(o,l);break;case"CONSTRUCT":{const d=new f(...l);r=G(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;k(e,h),r=U(d,[d])}break;case"RELEASE":r=void 0;break;default:return}}catch(o){r={value:o,[m]:0}}Promise.resolve(r).catch(o=>({value:o,[m]:0})).then(o=>{const[f,d]=E(o);n.postMessage(Object.assign(Object.assign({},f),{id:i}),d),s==="RELEASE"&&(n.removeEventListener("message",c),T(n),S in e&&typeof e[S]=="function"&&e[S]())}).catch(o=>{const[f,d]=E({value:new TypeError("Unserializable return value"),[m]:0});n.postMessage(Object.assign(Object.assign({},f),{id:i}),d)})}),n.start&&n.start()}function j(e){return e.constructor.name==="MessagePort"}function T(e){j(e)&&e.close()}function V(e,n){return x(e,[],n)}function w(e){if(e)throw new Error("Proxy has been released and is not useable")}function M(e){return g(e,{type:"RELEASE"}).then(()=>{T(e)})}const b=new WeakMap,p="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(b.get(e)||0)-1;b.set(e,n),n===0&&M(e)});function I(e,n){const t=(b.get(n)||0)+1;b.set(n,t),p&&p.register(e,n,e)}function W(e){p&&p.unregister(e)}function x(e,n=[],t=function(){}){let c=!1;const a=new Proxy(t,{get(i,s){if(w(c),s===z)return()=>{W(a),M(e),c=!0};if(s==="then"){if(n.length===0)return{then:()=>a};const u=g(e,{type:"GET",path:n.map(l=>l.toString())}).then(y);return u.then.bind(u)}return x(e,[...n,s])},set(i,s,u){w(c);const[l,r]=E(u);return g(e,{type:"SET",path:[...n,s].map(o=>o.toString()),value:l},r).then(y)},apply(i,s,u){w(c);const l=n[n.length-1];if(l===F)return g(e,{type:"ENDPOINT"}).then(y);if(l==="bind")return x(e,n.slice(0,-1));const[r,o]=R(u);return g(e,{type:"APPLY",path:n.map(f=>f.toString()),argumentList:r},o).then(y)},construct(i,s){w(c);const[u,l]=R(s);return g(e,{type:"CONSTRUCT",path:n.map(r=>r.toString()),argumentList:u},l).then(y)}});return I(a,e),a}function D(e){return Array.prototype.concat.apply([],e)}function R(e){const n=e.map(E);return[n.map(t=>t[0]),D(n.map(t=>t[1]))]}const C=new WeakMap;function U(e,n){return C.set(e,n),e}function G(e){return Object.assign(e,{[P]:!0})}function E(e){for(const[n,t]of A)if(t.canHandle(e)){const[c,a]=t.serialize(e);return[{type:"HANDLER",name:n,value:c},a]}return[{type:"RAW",value:e},C.get(e)||[]]}function y(e){switch(e.type){case"HANDLER":return A.get(e.name).deserialize(e.value);case"RAW":return e.value}}function g(e,n,t){return new Promise(c=>{const a=Y();e.addEventListener("message",function i(s){!s.data||!s.data.id||s.data.id!==a||(e.removeEventListener("message",i),c(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),t)})}function Y(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var L=function(e,n,t,c){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(o){try{r(c.next(o))}catch(f){s(f)}}function l(o){try{r(c.throw(o))}catch(f){s(f)}}function r(o){o.done?i(o.value):a(o.value).then(u,l)}r((c=c.apply(e,n||[])).next())})},O=function(e,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,a,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(r){return function(o){return l([r,o])}}function l(r){if(c)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(t=0)),t;)try{if(c=1,a&&(i=r[0]&2?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[r[0]&2,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return t.label++,{value:r[1],done:!1};case 5:t.label++,a=r[1],r=[0];continue;case 7:r=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){t.label=r[1];break}if(r[0]===6&&t.label<i[1]){t.label=i[1],i=r;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(r);break}i[2]&&t.ops.pop(),t.trys.pop();continue}r=n.call(e,t)}catch(o){r=[6,o],a=0}finally{c=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};importScripts("https://cdn.jsdelivr.net/pyodide/v0.22.0/full/pyodide.js"),console.log=function(){};var q={init:function(e,n,t){return L(this,void 0,void 0,function(){var c,a,i;return O(this,function(s){switch(s.label){case 0:return c=self,[4,self.loadPyodide({stdout:e})];case 1:return c.pyodide=s.sent(),t[0].length>0?[4,self.pyodide.loadPackage(t[0])]:[3,3];case 2:s.sent(),s.label=3;case 3:return t[1].length>0?[4,self.pyodide.loadPackage(["micropip"])]:[3,6];case 4:return s.sent(),a=self.pyodide.pyimport("micropip"),[4,a.install(t[1])];case 5:s.sent(),s.label=6;case 6:return i=self.pyodide.version,n({version:i}),[2]}})})},run:function(e){return L(this,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return[4,self.pyodide.runPythonAsync(e)];case 1:return n.sent(),[2]}})})},readFile:function(e){return self.pyodide.FS.readFile(e,{encoding:"utf8"})},writeFile:function(e,n){return self.pyodide.FS.writeFile(e,n,{encoding:"utf8"})},mkdir:function(e){self.pyodide.FS.mkdir(e)},rmdir:function(e){self.pyodide.FS.rmdir(e)}};k(q)})();
